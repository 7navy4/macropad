/*
 * menu.c
 *
 *  Created on: Jan 14, 2023
 *      Author: 7navy4
 */

/*------------------------------------------------------------------------------------*/
#include "menu.h"
#include "main.h"
#include "string.h"
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
struct level  mainM,*currentM;
struct level buttonM,displayM,modeM;
struct level scrollM;
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
char *displayButtons[] ={"All","Pressed"};
char *displayModes[]   ={"Kicad","Eagle","Phtshop","Premiere","Custom"};

/*------------------------------------------------------------------------------------*/

void InitMenu(){
	/*--------------------------------------------------------------------------------*/
	BuildMenu(&buttonM, "Button", executeButton, &mainM, &displayM, &scrollM, &scrollM);
	BuildMenu(&scrollM, "Scroll", executeScroll, &mainM, 0, &buttonM, &buttonM);
	/*--------------------------------------------------------------------------------*/

	/*--------------------------------------------------------------------------------*/
	BuildMenu(&displayM, "Display", executeDisplay, &buttonM, 0, &modeM, &modeM);
	BuildMenu(&modeM, 	"Mode", executeMode, &buttonM, 0, &displayM, &displayM);
	/*--------------------------------------------------------------------------------*/
}

/*------------------------------------------------------------------------------------*/
void executeButton(){

}
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
void executeScroll(){

}
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
void executeDisplay(){

}
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
void executeMode(){

}
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
void BuildMenu(struct level *currentNode, char name[16], void (*execute)(void) , struct level *prevNode, struct level *nextNode,struct level *upNode,struct level *downNode)
{
    strcpy(currentNode->name, name);
    currentNode->prev = prevNode;
    currentNode->next = nextNode;
    currentNode->up = upNode;
    currentNode->down = downNode;
    currentNode->execute = execute;
}
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
void Up(struct level **currentNode)
{
  if( (*currentNode) ->up != 0)
  (*currentNode) = (*currentNode)->up;
}
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
void Down(struct level **currentNode)
{
  if( (*currentNode) ->down != 0)
  (*currentNode) = (*currentNode)->down;
}
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
void Next(struct level **currentNode)
{
	if((*currentNode)->execute != 0)
	{
		(*currentNode)->execute;
	}
	else if((*currentNode)->next != 0)
	{
		(*currentNode) = (*currentNode)->next;
	}
}
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
void Prev(struct level **currentNode)
{
  if( (*currentNode) ->prev != 0)
  (*currentNode) = (*currentNode)->prev;
}
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
void MenuTransition(uint8_t task){



	switch(task)
	{
		case idleE:

			break;
		case upE:
			Up(&currentM);
			break;
		case downE:
			Down(&currentM);
			break;
		case nextE:
			Next(&currentM);
			break;
		case prevE:
			Prev(&currentM);
			break;
		default:
			break;

	}
}
/*------------------------------------------------------------------------------------*/

